import { ClsHookedStrategy } from '#src/session-strategy/cls-hooked-strategy';
export class NodeSessionUtil {
    _strategy;
    constructor(props) {
        const { sessionStrategy = new ClsHookedStrategy() } = props ?? {};
        this._strategy = sessionStrategy;
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    createAsyncSession(callback) {
        return new Promise((resolve, reject) => {
            this._strategy.createSession(() => {
                callback().then(resolve).catch(reject);
            });
        });
    }
    createSession(callback) {
        this._strategy.createSession(callback);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZS1zZXNzaW9uLXV0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbm9kZS1zZXNzaW9uLXV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sMkNBQTJDLENBQUE7QUFHN0UsTUFBTSxPQUFPLGVBQWU7SUFDUixTQUFTLENBQWlCO0lBRTdDLFlBQVksS0FBNkM7UUFDeEQsTUFBTSxFQUFFLGVBQWUsR0FBRyxJQUFJLGlCQUFpQixFQUFFLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFBO1FBQ2pFLElBQUksQ0FBQyxTQUFTLEdBQUcsZUFBZSxDQUFBO0lBQ2pDLENBQUM7SUFFRCw4REFBOEQ7SUFDOUQsa0JBQWtCLENBQVUsUUFBMEI7UUFDckQsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUU7Z0JBQ2pDLFFBQVEsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDdkMsQ0FBQyxDQUFDLENBQUE7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUNILENBQUM7SUFFRCxhQUFhLENBQUMsUUFBb0I7UUFDakMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDdkMsQ0FBQztDQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xzSG9va2VkU3RyYXRlZ3kgfSBmcm9tICcjc3JjL3Nlc3Npb24tc3RyYXRlZ3kvY2xzLWhvb2tlZC1zdHJhdGVneSdcbmltcG9ydCB7IHR5cGUgU2Vzc2lvblN0cmF0ZWd5IH0gZnJvbSAnI3NyYy9zZXNzaW9uLXN0cmF0ZWd5L3Nlc3Npb24tc3RyYXRlZ3knXG5cbmV4cG9ydCBjbGFzcyBOb2RlU2Vzc2lvblV0aWwge1xuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgX3N0cmF0ZWd5OiBTZXNzaW9uU3RyYXRlZ3lcblxuXHRjb25zdHJ1Y3Rvcihwcm9wcz86IHsgc2Vzc2lvblN0cmF0ZWd5PzogU2Vzc2lvblN0cmF0ZWd5IH0pIHtcblx0XHRjb25zdCB7IHNlc3Npb25TdHJhdGVneSA9IG5ldyBDbHNIb29rZWRTdHJhdGVneSgpIH0gPSBwcm9wcyA/PyB7fVxuXHRcdHRoaXMuX3N0cmF0ZWd5ID0gc2Vzc2lvblN0cmF0ZWd5XG5cdH1cblxuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXHRjcmVhdGVBc3luY1Nlc3Npb248VCA9IGFueT4oY2FsbGJhY2s6ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5fc3RyYXRlZ3kuY3JlYXRlU2Vzc2lvbigoKSA9PiB7XG5cdFx0XHRcdGNhbGxiYWNrKCkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpXG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRjcmVhdGVTZXNzaW9uKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0dGhpcy5fc3RyYXRlZ3kuY3JlYXRlU2Vzc2lvbihjYWxsYmFjaylcblx0fVxufVxuIl19